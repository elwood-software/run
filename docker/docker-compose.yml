version: '3.8'

services:
  runner:
    build:
      context: ../
      dockerfile: Dockerfile
    env_file:
      - ../.env
    image: runner
    container_name: runner
    ports:
      - "8000:8000"
    volumes:
      - ../tests/fixtures:/tmp/fixtures
      - ../tmp-workspace:/elwood/run/runner/workspace
      - ../src:/elwood/run/runtime
      - ../deno.json:/elwood/run/deno.json
      - ../actions:/elwood/run/actions
      - ./bootstrap.yml:/elwood/run/bootstrap.yml
    working_dir: /elwood/run/runner/workspace
    environment:
      - ELWOOD_RUNNER_STD_ACTIONS_PREFIX=file:///elwood/run/actions
      - ELWOOD_RUNNER_MODE_OVERRIDE=worker
      - ELWOOD_RUNNER_BOOTSTRAP_FILE=/elwood/run/bootstrap.yml



